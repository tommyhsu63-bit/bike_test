<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>动感单车VIP预约系统</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body{font-family:'Noto Sans SC',system-ui,-apple-system,"Segoe UI","PingFang SC","Microsoft YaHei",sans-serif;margin:0;background:#f7f8fa;color:#222}
    header{background:#111;color:#fff;padding:24px}
    header h1{margin:0;font-size:24px}
    header p{margin:6px 0 0;opacity:.8}
    main{max-width:980px;margin:24px auto;padding:0 16px}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px}
    .card{background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:16px;box-shadow:0 1px 2px rgba(0,0,0,.05)}
    h2{font-size:18px;margin:0 0 12px}
    h3{font-size:16px;margin:16px 0 8px}
    label{display:block;font-size:14px;margin:8px 0 4px}
    input,select,button,textarea{width:100%;padding:10px;border:1px solid #d1d5db;border-radius:8px;font-size:14px}
    button{background:#2563eb;color:#fff;border:none;cursor:pointer}
    button:hover{background:#1e40af}
    .muted{color:#555;font-size:13px}
    footer{max-width:980px;margin:24px auto;padding:16px;color:#555;font-size:13px}
    .stats{display:flex;gap:12px;flex-wrap:wrap;margin-top:8px}
    .pill{background:#eef2ff;color:#1e40af;border-radius:999px;padding:6px 10px;font-size:12px}
    .calendar{display:grid;grid-template-columns:repeat(7,1fr);gap:6px}
    .day{background:#fff;border:1px dashed #e5e7eb;border-radius:8px;height:42px;display:flex;align-items:center;justify-content:center;color:#666}
  </style>
</head>
<body>
  <header>
    <h1>动感单车VIP预约系统</h1>
    <p>公平公正 • 便捷高效 • 专属体验</p>
  </header>
  <main>
    <div class="grid">
      <section class="card">
        <h2>今日课程信息</h2>
        <div class="muted">日期：<span id="today-date"></span>｜时间：<span id="today-time">—</span></div>
        <p class="muted">课程说明：<span id="today-desc">—</span></p>
        <div class="stats">
          <span class="pill">最大预约人数：<span id="max-book">15</span>人</span>
          <span class="pill">剩余座位：<span id="left-seat">15</span></span>
          <span class="pill">总座位数：<span id="total-seat">43</span></span>
          <span class="pill">已预约：<span id="booked">0</span></span>
        </div>
        <h3>预约信息</h3>
        <label>姓名<input id="name" placeholder="请输入姓名"/></label>
        <label>手机号码<input id="mobile" placeholder="请输入手机号"/></label>
        <label>选择单车座位<select id="seat"></select></label>
        <button id="reserve">立即预约</button>
        <p id="msg" class="muted"></p>
      </section>
      
      <section class="card">
        <h2>选择预约日期</h2>
        <div class="calendar" id="calendar"></div>
        <p class="muted">• 蓝色 表示已选择的日期 • 绿色背景 表示有课程安排 • 青色边框 表示今天 • 橙色背景 表示周末</p>
      </section>
    </div>

    <section class="card" style="margin-top:16px">
      <h2>管理设置</h2>
      <label>管理员密码<input id="admin-pass" type="password" placeholder="设置或输入管理员密码"/></label>
      <label>默认每节课最大预约人数<input id="default-max" type="number" min="1" max="43" value="15"/></label>
      <label>设置系统标题<input id="sys-title" placeholder="动感单车VIP预约系统"/></label>
      <button id="save-basic">保存基本设置</button>
      <p class="muted">数据管理：<button id="export">导出数据</button> <button id="import">导入数据</button> <button id="clear">清除数据</button></p>
    </section>

    <section class="card">
      <h2>课程安排管理</h2>
      <h3>单日课程设置</h3>
      <label>选择日期<input id="plan-date" type="date"/></label>
      <label>课程时间<input id="plan-time" type="time"/></label>
      <label>课程说明<input id="plan-desc"/></label>
      <label>该课程最大预约人数<input id="plan-max" type="number" min="1" max="43" placeholder="留空使用默认值"/></label>
      <button id="plan-add">添加/更新课程安排</button>
      <button id="plan-del">删除课程安排</button>
    </section>

    <section class="card">
      <h2>当前预约列表</h2>
      <div id="book-list" class="muted">暂无预约</div>
    </section>

    <section class="card">
      <h2>预约二维码</h2>
      <p class="muted">使用微信扫描下方二维码进行预约（需公网可访问的HTTPS链接）</p>
      <canvas id="qrcode" width="160" height="160" style="border:1px solid #eee;border-radius:8px"></canvas>
      <div class="muted">二维码链接：<span id="qr-link"></span></div>
      <button id="regen-qr">重新生成二维码</button>
    </section>
  </main>
  <footer>
    © 2024 健身房动感单车VIP预约系统 · 公平公正的预约平台
  </footer>

  <script>
    // 简易前端逻辑（本地存储模拟），适用于 GitHub Pages 的纯静态托管
    const today = new Date();
    document.getElementById('today-date').textContent = today.toLocaleDateString('zh-CN');
    const seatSel = document.getElementById('seat');
    for(let i=1;i<=43;i++){ const o=document.createElement('option'); o.value=i; o.textContent=`座位 ${i}`; seatSel.appendChild(o); }

    // 渲染简单日历（当前月）
    const cal = document.getElementById('calendar');
    const first = new Date(today.getFullYear(), today.getMonth(), 1);
    const startPad = first.getDay();
    for(let i=0;i<startPad;i++){ const d=document.createElement('div'); d.className='day'; d.textContent=''; cal.appendChild(d); }
    const days = new Date(today.getFullYear(), today.getMonth()+1, 0).getDate();
    for(let d=1; d<=days; d++){ const el=document.createElement('div'); el.className='day'; el.textContent=d; if(d===today.getDate()) el.style.border='2px solid #0ea5e9'; cal.appendChild(el); }

    // 预约按钮
    document.getElementById('reserve').addEventListener('click',()=>{
      const name = document.getElementById('name').value.trim();
      const mobile = document.getElementById('mobile').value.trim();
      const seat = document.getElementById('seat').value;
      if(!name || !mobile){ msg('请填写姓名和手机号'); return; }
      const list = JSON.parse(localStorage.getItem('bookings')||'[]');
      list.push({date:today.toISOString().slice(0,10), time:'—', name, mobile, seat});
      localStorage.setItem('bookings', JSON.stringify(list));
      renderList();
      msg('预约成功！');
    });

    function renderList(){
      const list = JSON.parse(localStorage.getItem('bookings')||'[]');
      const el = document.getElementById('book-list');
      if(!list.length){ el.textContent='暂无预约'; return; }
      el.innerHTML = '<ul style="padding-left:16px">'+list.map(i=>`<li>${i.date} ${i.time} · 座位${i.seat} · ${i.name} (${i.mobile})</li>`).join('')+'</ul>';
      document.getElementById('booked').textContent = String(list.length);
      document.getElementById('left-seat').textContent = String(Math.max(0, 43 - list.length));
    }
    renderList();

    function msg(t){ document.getElementById('msg').textContent=t; setTimeout(()=>{document.getElementById('msg').textContent='';},3000); }

    // 简易二维码：将站点 URL 文本绘到画布（占位）
    function regenQR(){
      const url = location.href;
      document.getElementById('qr-link').textContent = url;
      const cvs = document.getElementById('qrcode');
      const ctx = cvs.getContext('2d');
      ctx.fillStyle = '#fff'; ctx.fillRect(0,0,cvs.width,cvs.height);
      ctx.fillStyle = '#000'; ctx.font = '12px sans-serif';
      ctx.fillText('请用外部工具生成真正二维码',8,20);
      ctx.fillText(url.slice(0,22)+'...',8,40);
    }
    regenQR();
    document.getElementById('regen-qr').addEventListener('click', regenQR);
  </script>
</body>
</html>